<!DOCTYPE html>
<html lang="en" xmlns:ng="http://angularjs.org" id="ng-app" ng-app="vipApp">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <title>VIP Dashboard</title>
  <meta name="description"
  content="Partnering with election boards, campaign managers, user experience architects, graphic designers, and application developers to better serve voters.">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="shortcut icon" href="assets/images/favicon.ico"/>

  <!-- Libs -->
  <!-- ======================================= -->

  <!-- json3 lib for IE compatibility -->
  <!--[if lte IE 8]>
  <script src="assets/js/lib/json3/lib/json3.min.js"></script>
  <![endif]-->

  <!-- random number generator -->
  <script src="assets/js/lib-static/sjcl/sjcl.js"></script>

  <!-- Modernizr lib -->
  <script src="assets/js/lib/modernizr/modernizr.js"></script>

  <!-- Moment lib -->
  <script src="assets/js/lib/moment/min/moment.min.js"></script>

  <!-- jQuery lib -->
  <script src="assets/js/lib/jquery/dist/jquery.min.js"></script>

  <!-- javaScript debug lib -->
  <script src="assets/js/lib/javascript-debug/ba-debug.min.js"></script>

  <!-- Angular lib -->
  <script src="assets/js/lib/angular/angular.min.js"></script>
  <script src="assets/js/lib/angular-route/angular-route.min.js"></script>
  <script src="assets/js/lib/angular-cookies/angular-cookies.min.js"></script>
  <script src="assets/js/lib/angular-mocks/angular-mocks.js"></script>

  <!-- NgTable -->
  <script src="assets/js/lib/ng-table/ng-table.js"></script>

  <!-- Leaflet -->
  <link href="assets/js/lib-static/leaflet/0.7.2/leaflet.css" rel="stylesheet">
  <script src="assets/js/lib-static/leaflet/0.7.2/leaflet.js"></script>

  <!-- ng-file-upload -->
  <script src="assets/js/lib/ng-file-upload/ng-file-upload.min.js"></script>

  <!-- angular auth0 -->
  <script src="assets/js/lib/auth0.js/build/auth0.js"></script>
  <script src="assets/js/lib/angular-auth0/dist/angular-auth0.js"></script>

  <!-- angular-ui-date -->
  <link rel="stylesheet" href="assets/js/lib/jquery-ui/themes/smoothness/jquery-ui.css"/>
  <script type="text/javascript" src="assets/js/lib/jquery-ui/jquery-ui.js"></script>
  <script type="text/javascript" src="assets/js/lib/angular-ui-date/dist/date.js"></script>

  <!-- ======================================= -->

  <!-- VIP App -->
  <script src="assets/js/app/utils.js"></script>

  <link href='//fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700,400italic' rel='stylesheet' type='text/css'>
  <link href="assets/css/app.css" rel="stylesheet">
  <script src="assets/js/app/config.js"></script>
  <script src="assets/js/app/app.js"></script>
  <script src="assets/js/app/services/appService.js"></script>

  <!-- Directives -->
  <script src="assets/js/app/directives/directives.js"></script>

  <!-- Auth -->
  <script src="assets/js/app/services/authService.js"></script>
  <script src="assets/js/app/controllers/loginCallbackController.js"></script>
  <script src="assets/js/app/controllers/logoutController.js"></script>

  <!-- Aside -->
  <script src="assets/js/app/controllers/asideController.js"></script>

  <!-- Home -->
  <script src="assets/js/app/controllers/homeController.js"></script>
  <script src="assets/js/app/services/homeService.js"></script>

	<!-- Profile -->
	<script src="assets/js/app/controllers/profileController.js"></script>
	<script src="assets/js/app/services/dasherService.js"></script>

  <!-- 3.0 -->
  <!-- Feeds -->
  <script src="assets/js/app/controllers/feedsController.js"></script>

  <!-- reusable leafs -->
  <script src="assets/js/app/controllers/feedErrorsController.js"></script>
  <script src="assets/js/app/controllers/feedElectionAdministrationController.js"></script>
  <script src="assets/js/app/controllers/feedElectoralDistrictController.js"></script>
  <script src="assets/js/app/controllers/feedElectoralDistrictsController.js"></script>

  <script src="assets/js/app/controllers/feedEarlyVoteSiteController.js"></script>
  <script src="assets/js/app/controllers/feedEarlyVoteSitesController.js"></script>

  <script src="assets/js/app/controllers/feedPollingLocationController.js"></script>
  <script src="assets/js/app/controllers/feedPollingLocationsController.js"></script>

  <script src="assets/js/app/controllers/feedOverviewController.js"></script>
  <script src="assets/js/app/controllers/feedSourceController.js"></script>
  <script src="assets/js/app/controllers/feedElectionController.js"></script>
  <script src="assets/js/app/controllers/feedStateController.js"></script>

  <script src="assets/js/app/controllers/feedLocalitiesController.js"></script>
  <script src="assets/js/app/controllers/feedLocalityController.js"></script>

  <script src="assets/js/app/controllers/feedPrecinctsController.js"></script>
  <script src="assets/js/app/controllers/feedPrecinctController.js"></script>

  <script src="assets/js/app/controllers/feedPrecinctSplitsController.js"></script>
  <script src="assets/js/app/controllers/feedPrecinctSplitController.js"></script>

  <script src="assets/js/app/controllers/feedContestsController.js"></script>
  <script src="assets/js/app/controllers/feedContestController.js"></script>
  <script src="assets/js/app/controllers/feedCandidateController.js"></script>
  <script src="assets/js/app/controllers/feedCandidatesController.js"></script>
  <script src="assets/js/app/controllers/feedBallotController.js"></script>
  <script src="assets/js/app/controllers/feedReferendumController.js"></script>
  <script src="assets/js/app/controllers/feedReferendaController.js"></script>
  <script src="assets/js/app/controllers/feedContestResultController.js"></script>

  <!-- 5.1 -->
  <script src="assets/js/app/controllers/5.1/v5AsideController.js"></script>
  <script src="assets/js/app/controllers/5.1/feedOverview51Controller.js"></script>
  <script src="assets/js/app/controllers/5.1/localityOverview51Controller.js"></script>
  <script src="assets/js/app/controllers/5.1/feedSource51Controller.js"></script>
  <script src="assets/js/app/controllers/5.1/feedErrors51Controller.js"></script>
  <script src="assets/js/app/controllers/5.1/feedErrorOverview51Controller.js"></script>
  <script src="assets/js/app/controllers/5.1/localityErrorsOverview51Controller.js"></script>

  <!-- Testing -->
  <script src="assets/js/app/controllers/testing/vitController.js"></script>
  <script src="assets/js/app/controllers/testing/addressesController.js"></script>
  <script src="assets/js/app/controllers/testing/asideController.js"></script>

  <!-- Centralization -->
  <script src="assets/js/app/controllers/centralization/centralizationController.js"></script>

  <!-- Shared -->
  <script src="assets/js/app/services/errorsService.js"></script>
  <script src="assets/js/app/services/feedsService.js"></script>
  <script src="assets/js/app/services/paths.js"></script>
  <script src="assets/js/app/services/configService.js"></script>

  <script src="assets/js/app/filters.js"></script>

  <script>
  // the ui-date library we're using to get a datepicker onto the page is not compatible
  // with our current version of angular, so this function lets us make a call from
  // the controller to get the data out of the datepicker element.  if any other
  // pages require a datepicker, this same setup can be used; for more details see
  // the template at public/app/partials/centralization/centralization.html and
  // the controller at public/assets/js/app/controllers/centralization/centralizationController.js
  function getDateValue() {
    var dateVal = document.getElementById('datepicker').value;
    return dateVal;
  };

  function missingValue(message) {
    alert(message);
  };
  </script>

</head>
<body role="application">

  <header role="banner">
    <div class="wrapper">
      <a href="/" class="branding"><span>VIP Dashboard</span></a>

      <nav class="main-nav" ng-if="user.isAuthenticated">
        <ul style="padding:5px; float: right">
          <li><i class="fi-torso"></i> {{user.userName}}</li>
          <li><a id="pageHeader-feedsLink" href="#/feeds" alert-box error ng-class="{'is-active': pageHeader.section=='feeds'}"><i class="fi-list"></i> Feeds</a></li>
					<li><a id="pageHeader-profileLink" href="#/profile" alert-box error ng-class="{'is-active': pageHeader.section=='profile'}"><i class="fi-list"></i> User Profile</a></li>
					<li><a id="pageHeader-sign-out" href="{{logoutUrl}}"><i class="fi-x"></i> Sign Out</a></li>
        </ul>
        <ul>
          <li><a id="pageHeader-testing" href="#/testing/vit"><i class="fi-clipboard-pencil"></i> Staging Data Review</a></li>
          <li ng-if="hasRole('data-centralization') || hasRole('state-admin') || hasRole('super-admin')"><a id="pageHeader-county-data" href="#/county-data/centralization"><i class="fi-upload"></i> County Data Uploads</a></li>
          <li ng-if="hasRole('data-centralization') || hasRole('state-admin') || hasRole('super-admin')"><a id="pageHeader-county-data" href="/early_vote.html"><i class="fi-upload"></i> Early Vote Sites</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <div class="main" role="main">
    <div class="wrapper">
      <div class="content"
           ng-class="{feed: (pageHeader.section === 'feeds' && pageHeader.title !== 'Feeds') || pageHeader.section === 'testing'}">

        <h1 id="pageHeader-title">{{pageHeader.title}}</h1>

        <nav id="pageHeader-breadcrumbs"
             class="breadcrumbs"
             ng-if="pageHeader.breadcrumbs!==null">
          <ul>
            <li id="pageHeader-breadcrumb{{$index}}"
                ng-class="{'is-active': $last || crumb.url==null }"
                ng-repeat="crumb in pageHeader.breadcrumbs">
              <a href="{{crumb.url}}">{{crumb.name}}</a>
            </li>
          </ul>
        </nav>

        <div id="pageHeader-error" class="alert-box error" ng-if="pageHeader.error!==null && pageHeader.error.length > 0" ng-cloak>
          ERROR: {{pageHeader.error}}
        </div>

        <div id="pageHeader-alert" class="alert-box" ng-if="pageHeader.alert!==null && pageHeader.alert.length > 0" ng-cloak>
          NOTE: {{pageHeader.alert}}
        </div>

        <div ng-view></div>

        <footer role="contentinfo">
          <small>&copy; Copyright 2014 Voting Information Project.</small>
        </footer>
      </div>

      <div ng-switch on="$location.url().split('/')[1]">
        <div ng-switch-when="5.1">
          <aside class="feed-meta"
                 ng-if="$location.url() !== '/feeds' && pageHeader.section === 'feeds' && pageHeader.title !== 'Feeds'"
                 ng-controller="v5AsideController" ng-include src="'app/partials/5.1/aside.html'"></aside>
        </div>
	      <div ng-switch-when="testing">
          <aside class="feed-meta"
                 ng-controller="TestingAsideCtrl"
		             ng-include src="'app/partials/testing/aside.html'"></aside>
        </div>
        <div ng-switch-default>
          <aside class="feed-meta"
                 ng-if="$location.url() !== '/feeds' && pageHeader.section === 'feeds' && pageHeader.title !== 'Feeds'"
                 ng-controller="AsideCtrl"
                 ng-include src="'app/partials/aside.html'"></aside>
        </div>
      </div>

    </div>
  </div>

</body>
</html>
